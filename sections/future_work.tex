%!TEX root = ../copatterns-thesis.tex
\chapter{Future Work}
\label{cha:future-work}
\section{Copatterns}
\subsection{With-rule}
\subsection{Pattern matching on Codata}
\subsection{Improved Syntax}

%### Copatterns ###
% Copatterns in with-rule
% Pattern matching på codata i Idris?
% Måske bedre syntaks
% 
%##################
\section{Guarded Recursion}
\label{sec:guarded-recursion-1}
Section~\ref{sec:discussion} we discussed the shortcomings and limitations of
our system. To reiterate, we mentioned the following:

\begin{itemize}
\item Preservation of semantics
\item Type class instances
\item Mutual recursion
\item Totality dependencies
\item User-written guarded recursion
\item Multiple clocks
\item Error reporting
\end{itemize}

Improving on these are great opportunities for further research and
development. While we already went over possible solutions to some of these problems in
Section~\ref{sec:discussion}, some were left without further discussion.

\todo{ref to fixed point elimination elimination section!}
We also discussed an implementation without the fixed point
elimination. While not yet implemented, we intent to adjust our implementation
and reintroduce the fixed point operator, and not rely on the fixed point elimination
rules. We expect to have implemented these changes within a reasonable
time. Therefore, we will base our suggestions for future work on a new
improved implementation.

\subsection{Mutual Recursion}
We discussed how we can not ensure productivity for mutually recursive
functions, as our analysis prevents infinite recursion by securing that the
recursive reference is only available later. Because mutual recursion can lead
to infinite recursion through other constructs, we can not guarantee productivity.

Clouston et al.\,\citep{BirkedalL:guarded-lambda-conf} discuss solving mutual
recursion by defining the fixed point of a product of functions. A similar
approach could be adapted in our system to include mutual recursion. This would
require changes to inference system, because the we would have to infer this
product of functions. No changes would be needed in the checker, as a fixed
point rule works for any type, and thereby also products of functions. 

\subsection{User-written Guarded Recursion}
Another interesting continuation of our project is how to implement user-written
guarded recursion. In Section~\ref{sec:user-written-guarded} we discussed the
a challenge of allowing the user to write guarded recursion, namely that
allowing the user to pattern match on values of type \texttt{Later}.
% bug fixes
%### GUARDED recursion ####
% Flere ure: Hvor stort et problem er det kun at have eet ur?
% Mutual recursion
% (Instans-funktioner)
% Kan man skrive guarded recursion selv?
%% Delvis inferens?
% Bevis for preservation of semantics
%##########################

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../copatterns-thesis"
%%% End:
